(function(c){var l=function(){function m(a){return l(x(a))}function l(a){var b=[a.h.toString(16),a.g.toString(16),a.a.toString(16)];c.j(b,function(a,c){1==c.length&&(b[a]="0"+c)});return b.join("")}function x(a){var b,d,c;b=Math.round(a.b);var e=Math.round(255*a.c/100);a=Math.round(255*a.a/100);if(0==e)b=d=c=a;else{var e=(255-e)*a/255,g=b%60*(a-e)/60;360==b&&(b=0);60>b?(b=a,c=e,d=e+g):120>b?(d=a,c=e,b=a-g):180>b?(d=a,b=e,c=e+g):240>b?(c=a,b=e,d=a-g):300>b?(c=a,d=e,b=e+g):360>b?(b=a,d=e,c=a-g):c=d=
    b=0}return{h:Math.round(b),g:Math.round(d),a:Math.round(c)}}function k(a){var b={b:0,c:0,a:0},d=Math.min(a.h,a.g,a.a),c=Math.max(a.h,a.g,a.a),d=c-d;b.a=c;b.c=0!=c?255*d/c:0;b.b=0!=b.c?a.h==c?(a.g-a.a)/d:a.g==c?2+(a.a-a.h)/d:4+(a.h-a.g)/d:-1;b.b*=60;0>b.b&&(b.b+=360);b.c*=100/255;b.a*=100/255;b.b=Math.round(b.b);b.c=Math.round(b.c);b.a=Math.round(b.a);return b}function n(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{h:a>>16,g:(a&65280)>>8,a:a&255}}function p(a){return{b:Math.round(Math.min(360,
    Math.max(0,a.b))),c:Math.round(Math.min(100,Math.max(0,a.c))),a:Math.round(Math.min(100,Math.max(0,a.a)))}}function B(){var a,b,d,f=c("#"+c(this).data("colorpickerId"));f.data("colorpicker");f.get(0);var e=c(this).offset(),g="CSS1Compat"==document.compatMode;a=window.pageXOffset||(g?document.documentElement.scrollLeft:document.body.scrollLeft);b=window.pageYOffset||(g?document.documentElement.scrollTop:document.body.scrollTop);d=window.innerWidth||(g?document.documentElement.clientWidth:document.body.clientWidth);
  var h=e.top+this.offsetHeight,e=e.left;h+176>b+(window.innerHeight||(g?document.documentElement.clientHeight:document.body.clientHeight))&&(h-=this.offsetHeight+176);e+356>a+d&&(e=Math.max(0,e-356));f.i({left:e+"px",top:h+"px"});!1!=f.data("colorpicker").A.apply(this,[f.get(0)])&&f.show();c(document);return!1}function y(a){var b=a;"undefined"!==typeof event&&event.touches&&(b=event.touches[0]);q.apply(a.data.k.data("colorpicker").f.e(6).d(parseInt(100*(150-Math.max(0,Math.min(150,b.pageY-a.data.n.top)))/
    150,10)).end().e(5).d(parseInt(100*Math.max(0,Math.min(150,b.pageX-a.data.n.left))/150,10)).get(0),[a.data.C]);return!1}function C(a){a.preventDefault();var b={k:c(this).parent(),n:c(this).offset()};b.C=b.k.data("colorpicker").m;c(document);c(document);c(".colorpicker_color",b.k).U("click",b,y);a.data=b;y(a)}function D(){var a=c(this).parent().find("input").focus();c(this).parent().p("colorpicker_slider");a.d();c(this).parent().parent().data("colorpicker");c(document);c(document)}function E(){z=0<
    this.parentNode.className.indexOf("_hex")?70:65;c(this).parent().parent().data("colorpicker").f.parent().D("colorpicker_focus");c(this).parent().p("colorpicker_focus")}function F(){c(this).parent().parent().data("colorpicker").f.parent().D("colorpicker_focus")}function q(a){var b=c(this).parent().parent(),d;if(0<this.parentNode.className.indexOf("_hex")){d=b.data("colorpicker");var f=this.value,e=6-f.length;if(0<e){for(var g=[],h=0;h<e;h++)g.push("0");g.push(f);f=g.join("")}f=k(n(f));d.color=d=f}else 0<
    this.parentNode.className.indexOf("_hsb")?b.data("colorpicker").color=d=p({b:parseInt(b.data("colorpicker").f.e(4).d(),10),c:parseInt(b.data("colorpicker").f.e(5).d(),10),a:parseInt(b.data("colorpicker").f.e(6).d(),10)}):(d=b.data("colorpicker"),f=parseInt(b.data("colorpicker").f.e(1).d(),10),e=parseInt(b.data("colorpicker").f.e(2).d(),10),g=parseInt(b.data("colorpicker").f.e(3).d(),10),f={h:Math.min(255,Math.max(0,f)),g:Math.min(255,Math.max(0,e)),a:Math.min(255,Math.max(0,g))},d.color=d=k(f));a&&
(r(d,b.get(0)),s(d,b.get(0)),t(d,b.get(0)));u(d,b.get(0));v(d,b.get(0));w(d,b.get(0));b.data("colorpicker");m(d)}function G(a){a=a.charCode||a.keyCode||-1;if(a>z&&90>=a||32==a)return!1;!0===c(this).parent().parent().data("colorpicker").m&&q.apply(this)}function w(a,b){c(b).data("colorpicker").w.i("backgroundColor","#"+m(a))}function A(a,b){c(b).data("colorpicker").s.i("backgroundColor","#"+m(a))}function v(a,b){c(b).data("colorpicker").u.i("top",parseInt(150-150*a.b/360,10))}function u(a,b){c(b).data("colorpicker").o.i("backgroundColor",
    "#"+m({b:a.b,c:100,a:100}));c(b).data("colorpicker").F.i({left:parseInt(150*a.c/100,10),top:parseInt(150*(100-a.a)/100,10)})}function s(a,b){c(b).data("colorpicker").f.e(0).d(m(a)).end()}function t(a,b){c(b).data("colorpicker").f.e(4).d(a.b).end().e(5).d(a.c).end().e(6).d(a.a).end()}function r(a,b){var d=x(a);c(b).data("colorpicker").f.e(1).d(d.h).end().e(2).d(d.g).end().e(3).d(d.a).end()}var z=65,H={N:"click",A:function(){},Q:function(){},S:function(){},R:function(){},T:function(){},color:"ff0000",
  m:!0,l:!1};return{v:function(a){a=c.extend({},H,a||{});if("string"==typeof a.color)a.color=k(n(a.color));else if(void 0!=a.color.h&&void 0!=a.color.g&&void 0!=a.color.a)a.color=k(a.color);else if(void 0!=a.color.b&&void 0!=a.color.c&&void 0!=a.color.a)a.color=p(a.color);else return this;return this.j(function(){if(!c(this).data("colorpickerId")){var b=c.extend({},a);b.B=a.color;var d="colorpicker_"+(c(this).r("id")||parseInt(1E3*Math.random()));c(this).data("colorpickerId",d);d=c('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').r("id",
    d);b.l?d.q(this).show():d.q(document.body);b.f=d.find("input").bind("keyup",G).bind("change",q).bind("blur",F).bind("focus",E);d.find("span").bind("mousedown touchstart",D).end().find(">div.colorpicker_current_color");b.o=d.find("div.colorpicker_color").bind("touchstart mousedown",C);b.F=b.o.find("div div");b.M=this;b.u=d.find("div.colorpicker_hue div");d.find("div.colorpicker_hue");b.w=d.find("div.colorpicker_new_color");b.s=d.find("div.colorpicker_current_color");d.data("colorpicker",b);d.find("div.colorpicker_submit");
  r(b.color,d.get(0));t(b.color,d.get(0));s(b.color,d.get(0));v(b.color,d.get(0));u(b.color,d.get(0));A(b.color,d.get(0));w(b.color,d.get(0));b.l?d.i({position:"relative",display:"block"}):c(this)}})},H:function(){return this.j(function(){c(this).data("colorpickerId")&&B.apply(this)})},t:function(){return this.j(function(){c(this).data("colorpickerId")&&c("#"+c(this).data("colorpickerId")).P()})},G:function(a){if("string"==typeof a)a=k(n(a));else if(void 0!=a.h&&void 0!=a.g&&void 0!=a.a)a=k(a);else if(void 0!=
    a.b&&void 0!=a.c&&void 0!=a.a)a=p(a);else return this;return this.j(function(){if(c(this).data("colorpickerId")){var b=c("#"+c(this).data("colorpickerId"));b.data("colorpicker").color=a;b.data("colorpicker").B=a;r(a,b.get(0));t(a,b.get(0));s(a,b.get(0));v(a,b.get(0));u(a,b.get(0));A(a,b.get(0));w(a,b.get(0))}})}}}();c.O.extend({I:l.v,J:l.t,L:l.H,K:l.G})})(jQuery);